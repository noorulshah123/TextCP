# construct names if needed
locals {
  lg_app_a = "/aws/lambda/${var.env}-app-a"
  lg_app_b = "/aws/lambda/${var.env}-app-b"
  lg_app_c = "/aws/ecs/${var.env}/svc-c"
}

module "cw_check" {
  source          = "./modules/cwlg_check_multi"
  log_group_names = [local.lg_app_a, local.lg_app_b, local.lg_app_c]
}

# Pull booleans individually, pass to your lambda modules
module "lambda_a" {
  source           = "./modules/lambda"
  name             = "app-a"
  log_group_exists = module.cw_check.exists[local.lg_app_a]
}

module "lambda_b" {
  source           = "./modules/lambda"
  name             = "app-b"
  log_group_exists = module.cw_check.exists[local.lg_app_b]
}

module "service_c" {
  source           = "./modules/lambda-or-ecs"
  name             = "svc-c"
  log_group_exists = module.cw_check.exists[local.lg_app_c]
}
